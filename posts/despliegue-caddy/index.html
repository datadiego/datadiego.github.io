<!doctype html><html domain=update-me.com lang=en><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><link href="/img/favicon/favicon-192x192.png?hash=2089033c93" rel=icon type=image/png><script src=https://cdn.jsdelivr.net/npm/p5@1.11.5/lib/p5.js></script><meta content=#f9c412 name=theme-color><meta content="max-snippet:-1, max-image-preview: large, max-video-preview: -1" name=robots><title>Despliegue con HTTPS y Caddy</title><meta content="Despliegue con HTTPS y Caddy" property=og:title><meta content="Guia de como implementar un servidor web con HTTPS utilizando Caddy." name=description><meta content="Guia de como implementar un servidor web con HTTPS utilizando Caddy." property=og:description><meta content=summary_large_image name=twitter:card><meta content=@update_me name=twitter:site><meta content=@update_me name=twitter:creator><link href=https://update-me.com/posts/despliegue-caddy/ rel=canonical><meta content=no-referrer-when-downgrade name=referrer><link href=/feed/feed.xml rel=alternate type=application/atom+xml title=datadiego><link href=/ rel=preconnect crossorigin><link href=/fonts/Inter-3.19.var.woff2 rel=preload type=font/woff2 as=font crossorigin><script src="/js/min.js?hash=8db32dcb3a" async defer></script><script csp-hash>if (/Mac OS X/.test(navigator.userAgent))document.documentElement.classList.add('apple')</script><style>:root{--primary: #12f91a;--primary-dark: #70e760;--main-width: calc(100vw - 3em)}main img{content-visibility:auto}article *{scroll-margin-top:50px}header nav{position:fixed;padding:.375em 1.5em;background:rgba(255,255,255,.9);font-weight:200;text-align:right}@media (min-width:37.5em){:root{--main-width: calc(37.5em - 3em)}}dialog,share-widget{position:fixed;opacity:.9}share-widget{right:20px;bottom:20px}share-widget div{width:30px;height:30px;background-image:url(/img/share.svg);background-repeat:no-repeat;background-position:center}.apple share-widget div{background-image:url(/img/share-apple.svg)}body,share-widget button{margin:0}share-widget button:active{transform:scale(1.2)}dialog{background-color:#8dff80;z-index:1000}dl{clear:both;display:block!important;margin:0 0 1.5em}header aside{font-style:italic}#nav{z-index:2;position:relative}#reading-progress,header nav{z-index:1;width:100vw;left:0;top:0}#reading-progress{background-color:var(--primary);position:absolute;bottom:0;transform:translate(-100vw,0);will-change:transform;pointer-events:none}#posts li{margin-bottom:.5em}@font-face{font-display:optional;font-family:"Inter UI";font-weight:100 900;font-style:oblique 0deg 10deg;src:url(/fonts/Inter-3.19.var.woff2) format("woff2")}button,html{line-height:1.15}html{-webkit-text-size-adjust:100%;font-family:Inter UI,sans-serif;--font-family: Inter UI, sans-serif}h1{font-size:3em;line-height:1.25;margin:.67em 0 .5em;font-size:2.074rem}a{background-color:transparent;color:#f9c412;text-decoration:none;color:var(--primary)}img{border-style:none;max-width:100%;height:auto;margin:0 auto}button{font-family:inherit;font-size:100%;overflow:visible;text-transform:none}[type=button],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}h2{font-size:2.5em;line-height:1.2;margin-bottom:.6em}body,p,pre,ul{font-size:1em}p,pre,ul{margin-bottom:1.5em}h1,h2{line-height:2.4rem;margin-bottom:1.36rem}h2{font-size:1.728rem}body,p,pre,ul{font-size:1rem;line-height:1.6}p,pre,ul{margin-bottom:1.36rem}@media (min-width:600px){h1{font-size:4.3978rem;line-height:4.4rem}h2{font-size:3.1097rem;line-height:3.52rem}body,p,pre,ul{font-size:1.1rem;line-height:1.6}h1,h2,p,pre,ul{margin-bottom:1.496rem}}@media (min-width:1200px){h1{font-size:6.0756rem;line-height:6.72rem}h2{font-size:4.05rem;line-height:4.8rem}body,p,pre,ul{font-size:1.2rem;line-height:1.6}h1,h2,p,pre,ul{margin-bottom:1.632rem}}code,pre{overflow-x:auto}pre{font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace}pre:has(code:not([class])){background:#2d2d2d}pre code:not([class]){color:#ccc;padding:0;overflow-x:scroll}button,code{border-radius:.3em}code{color:#e2777a;padding:0 .3em;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:90%;background:#2d2d2d}h1,h2{font-family:var(--font-family)}h2{font-style:italic}a:hover{text-decoration:underline}button{max-width:100%;background:#f2f2f2;color:#191919;cursor:pointer;display:inline-block;padding:.75em 1.5em;text-align:center;margin:0 .75em 1.5em 0}button:hover{background:#d9d9d9;color:#000}button:not([disabled]){background:#f9c412;color:#181818;background:var(--primary)}button:not([disabled]):hover{background:#ba9005;color:#000;background:var(--primary-dark)}*{border:0;box-sizing:border-box}body,header nav a{font-family:var(--font-family)}body{background:#181818;color:#eee}header{padding:1em 1.5em;width:37.5em;margin:0 auto;text-align:center;max-width:100%;display:flex;align-items:center;flex-direction:column}header p,ul{margin-top:0}header nav h1{float:left;font-size:inherit;line-height:inherit;margin:0;text-align:left}header nav a{font-weight:700;text-decoration:none;color:#181818;margin-left:1.5em}header nav a:first-of-type{margin-left:auto}header nav a:last-of-type{margin-right:1.5em}main{max-width:70rem;margin:0 auto}footer{background:rgba(0,0,0,.8);color:#fff;padding:3em;text-align:center}footer>*{margin:1.5em}footer nav a img{vertical-align:middle}footer nav,footer p{font-size:90%}article{max-width:100%;padding:1.5em;width:37.5em;margin:0 auto}li dl,li ul{margin-bottom:0}blockquote{border-left:1px solid #f9c412;padding:0 1.5em;margin:1.5em 0 1.5em 1.5em;border-left:1px solid var(--primary)}blockquote footer{background:0 0;display:block;color:#ccc;padding:.75em 0;font-size:90%;text-align:start}code[class*=language-],pre[class*=language-]{color:#ccc;background:0 0;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]{padding:0}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.comment,.token.doctype{color:#999}.token.function,.token.number{color:#f08d49}.token.class-name,.token.property{color:#f8c555}.token.builtin{color:#cc99cd}.token.string,.token.variable{color:#7ec699}.token.operator,.token.url{color:#67cdcc}.token.inserted{color:green}</style><header><nav><div id=nav><h1><a href=/ title=Homepage>datadiego</a></h1><a href=/posts/ >Archive</a> <a href=/tags/ >Tags</a> <a href=/about/ >About</a></div><div id=reading-progress aria-hidden=true></div></nav><h1>Despliegue con HTTPS y Caddy</h1><aside>3 min read.</aside><dialog id=message></dialog></header><main><article><p>Añadir un certificado SSL/TLS puede hacerse de varias formas, en esta vamos a utilizar Caddy para añadir https a cualquier servidor web que tengamos funcionando.<p>Necesitarás:<ul><li>Un servidor web, este puede ser un repositorio, un contenedor de docker, una aplicación que hemos instalado y lanzado, etc.<li>Un dominio, esto es necesario para solicitar un certificado SSL/TLS.<li>Un VPS en cualquier plataforma como linode o digitalocean.</ul><h2 id=configuraci%C3%B3n-vps>Configuración VPS <a href=#configuraci%C3%B3n-vps class=direct-link>#</a></h2><p>Necesitaremos los puertos <code>80</code> y <code>443</code> abiertos en el firewall de nuestro VPS.<p>Si estás usando <code>ufw</code> puedes abrirlos con los siguientes comandos:<pre class=language-bash><code class=language-bash><span class="token function">sudo</span> ufw <span class="token builtin class-name">enable</span> <span class="token comment"># opcional si ya lo tienes activo</span><br><span class="token function">sudo</span> ufw allow <span class="token number">22</span> <span class="token comment"># si no abres tambien el puerto 22, perderás el acceso SSH</span><br><span class="token function">sudo</span> ufw allow <span class="token number">80</span><br><span class="token function">sudo</span> ufw allow <span class="token number">443</span><br><span class="token function">sudo</span> ufw reload<br><span class="token function">sudo</span> ufw status <span class="token comment"># comprueba que los puertos están abiertos</span></code></pre><h2 id=configuraci%C3%B3n-dns>Configuración DNS <a href=#configuraci%C3%B3n-dns class=direct-link>#</a></h2><p>Lo primero es configurar nuestro servidor DNS para que apunte al VPS.<p>Ve a tu proveedor de dominio y añade un registro "a" que apunte a la dirección IP de tu servidor.<p>Comprueba la <a href=https://dnschecker.org/ >propagación de dns</a> para saber si ya es está redirigiendo.<h2 id=configuraci%C3%B3n-caddy>Configuración Caddy <a href=#configuraci%C3%B3n-caddy class=direct-link>#</a></h2><p>Hay <a href=https://caddyserver.com/docs/install>guias</a> para las diferentes formas de instalación de Caddy.<p>En nuestro caso, con ubuntu:<pre class=language-bash><code class=language-bash><span class="token function">sudo</span> <span class="token function">apt</span> update<br><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> <span class="token parameter variable">-y</span> debian-keyring debian-archive-keyring apt-transport-https <span class="token function">curl</span><br><span class="token function">curl</span> <span class="token parameter variable">-1sLf</span> <span class="token string">'https://dl.cloudsmith.io/public/caddy/stable/gpg.key'</span> <span class="token operator">|</span> <span class="token function">sudo</span> gpg <span class="token parameter variable">--dearmor</span> <span class="token parameter variable">-o</span> /usr/share/keyrings/caddy-stable-archive-keyring.gpg<br><span class="token function">curl</span> <span class="token parameter variable">-1sLf</span> <span class="token string">'https://dl.cloudsmith.io/public/caddy/stable/debian.deb.txt'</span> <span class="token operator">|</span> <span class="token function">sudo</span> <span class="token function">tee</span> /etc/apt/sources.list.d/caddy-stable.list<br><span class="token function">sudo</span> <span class="token function">apt</span> update<br><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> caddy</code></pre><p>Vamos a utilizar Caddy como un proxy reverso, este escuchará primero en el puerto 80 para solicitar los certificados SSL/TLS, si el DNS esta apuntando correctamente, el proceso debería ser exitoso y Caddy empezará a escuchar solicitudes HTTP en el puerto 443 utilizando HTTPS, y se comunicará localmente con tu servidor funcionando en el puerto que configures.<p>Caddy funciona mediante archivos de configuración llamados <code>Caddyfile</code>:<pre><code>cyberbunny.online {
    reverse_proxy localhost:8000
}
</code></pre><p>Donde <code>cyberbunny.online</code> es el dominio, <code>reverse_proxy</code> el modo en el que queremos que actue Caddy y <code>localhost:8000</code> la dirección y puerto donde tenemos nuestro servidor web funcionando.<p>Edita el archivo en <code>/etc/caddy/Caddyfile</code>.<p>Caddy no usará la configuración hasta que lo reinicies con <code>sudo systemctl restart caddy</code><p>Cuando lo reinicies, comprueba el estado de la obtención del certificado con <code>sudo systemctl status caddy</code>, si ves algo como esto, es que ha funcionado correctamente:<blockquote><p>Si la obtención del certificado falló, puede que debas esperar un poco hasta que el DNS se propague, además, Caddy espera varios minutos antes de volver a intentar la obtención del certificado, así que si no funciona a la primera, no te preocupes, espera un poco y vuelve a consultar el estado mas tarde mientras verificas que tu DNS está apuntando correctamente y tu configuración es correcta.</blockquote><blockquote><p>Mientras también puedes arrancar tu servidor web si no lo has hecho ya, Caddy no necesita que el servidor web esté funcionando para obtener el certificado, pero si lo necesitas para comprobar que al final funciona correctamente.</blockquote><share-widget><button aria-label=Share href=https://update-me.com/posts/despliegue-caddy/ on-click=share><div></div></button></share-widget><script type=application/ld+json>{
  "@context": "https://schema.org",
  "@type": "Article",
  "headline": "Despliegue con HTTPS y Caddy",
  "image": [],
  "author": "@datadiego", 
  "genre": "Insert a schema.org genre", 
  "publisher": {
    "@type": "Organization",
    "name": "Publisher name. Update me.",
    "logo": {
      "@type": "ImageObject",
      "url": "/img/favicon/favicon-192x192.png?hash=2089033c93"
    }
  },
  "url": "https://update-me.com/posts/despliegue-caddy/",
  "mainEntityOfPage": "https://update-me.com/posts/despliegue-caddy/",
  "datePublished": "2025-05-09",
  "dateModified": "2025-05-14",
  "description": "Añadir un certificado SSL/TLS puede hacerse de varias formas, en esta vamos a utilizar Caddy para añadir https a cualquier servidor web que..."
}</script><p>Published <time datetime=2025-05-09>09 May 2025</time></article></main><footer><a href=/about/ >@datadiego</a></footer>