<!doctype html><html domain=update-me.com lang=en><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><link href="/img/favicon/favicon-192x192.png?hash=2089033c93" rel=icon type=image/png><script src=https://cdn.jsdelivr.net/npm/p5@1.11.5/lib/p5.js></script><meta content=#f9c412 name=theme-color><meta content="max-snippet:-1, max-image-preview: large, max-video-preview: -1" name=robots><title>Dockerfile a fondo</title><meta content="Dockerfile a fondo" property=og:title><meta content="Guia para crear imagenes de docker a partir de un Dockerfile" name=description><meta content="Guia para crear imagenes de docker a partir de un Dockerfile" property=og:description><meta content=summary_large_image name=twitter:card><meta content=@update_me name=twitter:site><meta content=@update_me name=twitter:creator><link href=https://update-me.com/posts/crear-docker/ rel=canonical><meta content=no-referrer-when-downgrade name=referrer><link href=/feed/feed.xml rel=alternate type=application/atom+xml title=datadiego><link href=/ rel=preconnect crossorigin><link href=/fonts/Inter-3.19.var.woff2 rel=preload type=font/woff2 as=font crossorigin><script src="/js/min.js?hash=8db32dcb3a" async defer></script><script csp-hash>if (/Mac OS X/.test(navigator.userAgent))document.documentElement.classList.add('apple')</script><style>:root{--primary: #12f91a;--primary-dark: #70e760;--main-width: calc(100vw - 3em)}main img{content-visibility:auto}article *{scroll-margin-top:50px}header nav{position:fixed;padding:.375em 1.5em;background:rgba(255,255,255,.9);font-weight:200;text-align:right}@media (min-width:37.5em){:root{--main-width: calc(37.5em - 3em)}}dialog,share-widget{position:fixed;opacity:.9}share-widget{right:20px;bottom:20px}share-widget div{width:30px;height:30px;background-image:url(/img/share.svg);background-repeat:no-repeat;background-position:center}.apple share-widget div{background-image:url(/img/share-apple.svg)}body,share-widget button{margin:0}share-widget button:active{transform:scale(1.2)}dialog{background-color:#8dff80;z-index:1000}header aside{font-style:italic}#nav{z-index:2;position:relative}#reading-progress,header nav{z-index:1;width:100vw;left:0;top:0}#reading-progress{background-color:var(--primary);position:absolute;bottom:0;transform:translate(-100vw,0);will-change:transform;pointer-events:none}@font-face{font-display:optional;font-family:"Inter UI";font-weight:100 900;font-style:oblique 0deg 10deg;src:url(/fonts/Inter-3.19.var.woff2) format("woff2")}button,html{line-height:1.15}html{-webkit-text-size-adjust:100%;font-family:Inter UI,sans-serif;--font-family: Inter UI, sans-serif}h1{font-size:3em;line-height:1.25;margin:.67em 0 .5em;font-size:2.074rem}a{background-color:transparent;color:#f9c412;text-decoration:none;color:var(--primary)}b,strong{font-weight:700}img{border-style:none;max-width:100%;height:auto;margin:0 auto}button{font-family:inherit;font-size:100%;overflow:visible;text-transform:none}[type=button],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}h2{font-size:2.5em;line-height:1.2;margin-bottom:.6em}h1,h2,h3{margin-bottom:1.36rem}h3{font-size:2em;line-height:1.125;margin-bottom:.75em;font-size:1.4rem;line-height:1.6rem}body,p,pre{font-size:1em}p,pre{margin-bottom:1.5em}h1,h2{line-height:2.4rem}h2{font-size:1.728rem}body,p,pre{font-size:1rem;line-height:1.6}p,pre{margin-bottom:1.36rem}@media (min-width:600px){h1{font-size:4.3978rem;line-height:4.4rem}h2{font-size:3.1097rem;line-height:3.52rem}h3{font-size:2.1989rem;line-height:2.64rem}body,p,pre{font-size:1.1rem;line-height:1.6}h1,h2,h3,p,pre{margin-bottom:1.496rem}}@media (min-width:1200px){h1{font-size:6.0756rem;line-height:6.72rem}h2{font-size:4.05rem;line-height:4.8rem}h3{font-size:2.7rem;line-height:2.88rem}body,p,pre{font-size:1.2rem;line-height:1.6}h1,h2,h3,p,pre{margin-bottom:1.632rem}}code,pre{overflow-x:auto}pre{font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace}pre:has(code:not([class])){background:#2d2d2d}pre code:not([class]){color:#ccc;padding:0;overflow-x:scroll}button,code{border-radius:.3em}code{color:#e2777a;padding:0 .3em;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:90%;background:#2d2d2d}h1,h2,h3{font-family:var(--font-family)}h2{font-style:italic}a:hover{text-decoration:underline}button{max-width:100%;background:#f2f2f2;color:#191919;cursor:pointer;display:inline-block;padding:.75em 1.5em;text-align:center;margin:0 .75em 1.5em 0}button:hover{background:#d9d9d9;color:#000}button:not([disabled]){background:#f9c412;color:#181818;background:var(--primary)}button:not([disabled]):hover{background:#ba9005;color:#000;background:var(--primary-dark)}*{border:0;box-sizing:border-box}body,header nav a{font-family:var(--font-family)}body{background:#181818;color:#eee}header{padding:1em 1.5em;width:37.5em;margin:0 auto;text-align:center;max-width:100%;display:flex;align-items:center;flex-direction:column}header p{margin-top:0}header nav h1{float:left;font-size:inherit;line-height:inherit;margin:0;text-align:left}header nav a{font-weight:700;text-decoration:none;color:#181818;margin-left:1.5em}header nav a:first-of-type{margin-left:auto}header nav a:last-of-type{margin-right:1.5em}main{max-width:70rem;margin:0 auto}footer{background:rgba(0,0,0,.8);color:#fff;padding:3em;text-align:center}footer>*{margin:1.5em}footer nav a img{vertical-align:middle}footer nav,footer p{font-size:90%}article{max-width:100%;padding:1.5em;width:37.5em;margin:0 auto}</style><header><nav><div id=nav><h1><a href=/ title=Homepage>datadiego</a></h1><a href=/posts/ >Archive</a> <a href=/tags/ >Tags</a> <a href=/about/ >About</a></div><div id=reading-progress aria-hidden=true></div></nav><h1>Dockerfile a fondo</h1><aside>5 min read.</aside><dialog id=message></dialog></header><main><article><p>Los <code>Dockerfile</code> son los archivos básicos usados para crear imágenes de Docker.<p>Un <code>Dockerfile</code> no es mas que un archivo de texto que contiene las instrucciones necesarias para crear un servicio o aplicación. Estas instrucciones son leídas por Docker y se ejecutan en el orden en que aparecen en el archivo.<h2 id=creando-un-dockerfile-b%C3%A1sico>Creando un Dockerfile básico <a href=#creando-un-dockerfile-b%C3%A1sico class=direct-link>#</a></h2><p>Vamos a crear un contenedor básico que use <code>Ubuntu</code> como base:<pre><code># Usa la imagen oficial de Ubuntu como base
FROM ubuntu:latest
# Establece el directorio de trabajo
WORKDIR /cyber
# devuelve una terminal
CMD ["/bin/bash"]
</code></pre><p>Construye tu imagen con <code>docker build -t test .</code><p>Luego, ejecuta el contenedor con <code>docker run -it test</code><p>Esto te devolverá una terminal dentro del contenedor, puedes usarla como si fuera un sistema operativo normal, instalar paquetes, crear archivos, etc.<h2 id=instrucciones-b%C3%A1sicas>Instrucciones básicas <a href=#instrucciones-b%C3%A1sicas class=direct-link>#</a></h2><p>Partiendo del ejemplo anterior, vamos a ver las instrucciones más comunes que encontrarás en un <code>Dockerfile</code>:<h3 id=from>FROM <a href=#from class=direct-link>#</a></h3><p>La instrucción <code>FROM</code> se usa para especificar que imagen se usa como base para crear nuestra imagen.<p>Algunos ejemplos de imágenes base:<pre><code>FROM ubuntu:latest
FROM python:latest
FROM node:latest
FROM mysql:latest
FROM ctfd:latest
FROM datadiego/ejemplo:latest
</code></pre><p>Esta instrucción es obligatoria y debe ser la primera en el <code>Dockerfile</code>.<h3 id=workdir>WORKDIR <a href=#workdir class=direct-link>#</a></h3><p>La instrucción <code>WORKDIR</code> se usa para establecer el directorio de trabajo dentro del contenedor. Este directorio es donde se ejecutarán las instrucciones siguientes.<p>Si accedes al contenedor, el directorio de trabajo será el que hayas especificado en esta instrucción.<h3 id=cmd>CMD <a href=#cmd class=direct-link>#</a></h3><p>La instrucción <code>CMD</code> se usa para especificar el comando que se ejecutará cuando se inicie el contenedor. Este comando se ejecutará en el directorio de trabajo especificado por la instrucción <code>WORKDIR</code>.<p><strong>SOLO</strong> se ejecutará al crear el contenedor, si quieres ejecutar un comando cada vez que inicies el contenedor, usa la instrucción <code>ENTRYPOINT</code> en su lugar.<p>Algunos ejemplos de comandos utiles para Docker:<pre><code>CMD ["python", "app.py"] # ejecutar un script de python
CMD ["node", "app.js"] # ejecutar un script de node
CMD ["nginx", "-g", "daemon off;"] # ejecutar nginx
CMD ["/bin/bash"] # abrir una terminal
CMD ["python3", "-m", "http.server"] # ejecutar un servidor web en python
</code></pre><h3 id=run>RUN <a href=#run class=direct-link>#</a></h3><p>La instrucción <code>RUN</code> se usa para ejecutar un comando en el contenedor durante la construcción de la imagen. Este comando se ejecutará en el directorio de trabajo especificado por la instrucción <code>WORKDIR</code>.<p>Es útil para instalar paquetes o ejecutar scripts que son necesarios para la aplicación.<p>Vamos a añadir un par de instrucciones <code>RUN</code> al <code>Dockerfile</code> que creamos al principio:<pre><code>FROM ubuntu:latest
WORKDIR /cyber
RUN apt-get update
RUN apt-get install -y figlet
RUN figlet "Hola Mundo" > test.txt
CMD ["/bin/bash"]
</code></pre><p>Vuelve a construir la imagen y ejecutar el contenedor. Deberías ver un archivo llamado <code>test.txt</code> en tu directorio de trabajo con el siguiente contenido:<pre><code>datadiego@/tmp/test docker run -it testdocker
root@737d06c77b19:/cyber# ls
test.txt
root@737d06c77b19:/cyber# cat test.txt 
 _   _       _         __  __                 _       
| | | | ___ | | __ _  |  \/  |_   _ _ __   __| | ___  
| |_| |/ _ \| |/ _` | | |\/| | | | | '_ \ / _` |/ _ \ 
|  _  | (_) | | (_| | | |  | | |_| | | | | (_| | (_) |
|_| |_|\___/|_|\__,_| |_|  |_|\__,_|_| |_|\__,_|\___/ 
                                                      
root@737d06c77b19:/cyber# 
</code></pre><h2 id=copy>COPY <a href=#copy class=direct-link>#</a></h2><p>La instrucción <code>COPY</code> se usa para copiar archivos o directorios desde el host al contenedor. Esta instrucción se ejecutará en el directorio de trabajo especificado por la instrucción <code>WORKDIR</code>.<pre><code>COPY &lt;fuente> &lt;destino>
</code></pre><p>Crea un archivo <code>prueba.txt</code> en el mismo directorio que el <code>Dockerfile</code> y añade el siguiente contenido:<pre><code>COPY prueba.txt /cyber
</code></pre><p>Al construir la imagen y ejecutar el contenedor, deberías ver un archivo llamado <code>prueba.txt</code> en tu directorio de trabajo con el contenido que hayas escrito en el archivo.<h2 id=env>ENV <a href=#env class=direct-link>#</a></h2><p>La instrucción <code>ENV</code> se usa para establecer variables de entorno dentro del contenedor. Estas variables estarán disponibles para cualquier comando que se ejecute en el contenedor.<pre><code>ENV &lt;nombre_variable> &lt;valor_variable>
ENV NODE_ENV=production
ENV PORT=3000
</code></pre><p>En algunos casos, puedes ver que se usa la instrucción <code>ENV</code> para declarar variables sensibles como contraseñas o tokens de acceso. Evita hacer esto, en su lugar, usa la instrucción <code>ARG</code>.<h2 id=arg>ARG <a href=#arg class=direct-link>#</a></h2><p>La instrucción <code>ARG</code> se usa para declarar variables que se pueden pasar al contenedor durante la construcción de la imagen. Estas variables no estarán disponibles en el contenedor, pero se pueden usar para personalizar la construcción de la imagen. Por ejemplo:<pre><code>ARG PORT
ARG NODE_ENV=production
</code></pre><p>El primer argumento <code>PORT</code> no tiene valor por defecto, por lo que tendrás que pasarlo al construir la imagen. El segundo argumento <code>NODE_ENV</code> tiene un valor por defecto de <code>production</code>, pero puedes cambiarlo al construir la imagen, por ejemplo:<pre><code>docker build --build-arg PORT=3000 --build-arg NODE_ENV=development -t test .
</code></pre><p>Esto pasará los argumentos al contenedor y podrás usarlos en el <code>Dockerfile</code> como variables de entorno de forma segura.<h2 id=expose>EXPOSE <a href=#expose class=direct-link>#</a></h2><p>Por defecto, los contenedores de Docker no exponen puertos al host por seguridad. Si necesitas disponer de un puerto para accederlo desde el host que ejecuta el contenedor, tendrás que usar la instrucción <code>EXPOSE</code> para exponer el puerto al host.<pre><code>FROM node:latest
WORKDIR /cyber
COPY . .
RUN npm install
EXPOSE 3000
CMD ["node", "app.js"]
</code></pre><p>Este <code>Dockerfile</code> parte de la imagen oficial de <code>node</code>, establece un directorio de trabajo, copia todo el contenido del directorio actual al contenedor, instala npm y expone el puerto 3000 al host. Luego, ejecuta el comando <code>node app.js</code> para iniciar la aplicación.<h2 id=volumes>VOLUMES <a href=#volumes class=direct-link>#</a></h2><h2 id=entrypoint>ENTRYPOINT <a href=#entrypoint class=direct-link>#</a></h2><share-widget><button aria-label=Share href=https://update-me.com/posts/crear-docker/ on-click=share><div></div></button></share-widget><script type=application/ld+json>{
  "@context": "https://schema.org",
  "@type": "Article",
  "headline": "Dockerfile a fondo",
  "image": [],
  "author": "@datadiego", 
  "genre": "Insert a schema.org genre", 
  "publisher": {
    "@type": "Organization",
    "name": "Publisher name. Update me.",
    "logo": {
      "@type": "ImageObject",
      "url": "/img/favicon/favicon-192x192.png?hash=2089033c93"
    }
  },
  "url": "https://update-me.com/posts/crear-docker/",
  "mainEntityOfPage": "https://update-me.com/posts/crear-docker/",
  "datePublished": "2025-05-12",
  "dateModified": "2025-05-14",
  "description": "Los Dockerfile son los archivos básicos usados para crear imágenes de Docker. Un Dockerfile no es mas que un archivo de texto que contiene..."
}</script><p>Published <time datetime=2025-05-12>12 May 2025</time></article></main><footer><a href=/about/ >@datadiego</a></footer>