---
title: Nunjucks 101
description: Guia de inicio con Nunjucks
date: 2025-05-15
scheduled: 2025-05-15
tags:
  - coding
layout: layouts/post.njk
---

[Nunjucks](https://mozilla.github.io/nunjucks/) es un `template engine` para JavaScript, nos permite generar HTML usando una sintaxis similar a la de [Jinja2](https://jinja.palletsprojects.com/en/stable/). Es muy útil para crear páginas web dinámicas y se integra fácilmente con frameworks como Express.js o Django.

## Instalación
Para instalar Nunjucks, puedes usar npm:

```bash
npm install nunjucks
```

## Hola mundo

Vamos a partir de un ejemplo en el que solo usamos Nunjucks sin ningún framework de servidor.

Crea un archivo `index.njk` con el siguiente contenido:

{% raw %}
```html
<h1>{{title}}<h1>
<p>{{desc}}<p>
<ul>
  {% for item in items %}
    <li>{{ item }}</li>
  {% endfor %}
</ul>
```
{% endraw %}

Luego, crea un archivo `index.js` con el siguiente contenido:

```javascript
const nunjucks = require('nunjucks');
const fs = require('fs');
const path = require('path');

const templatePath = path.join(__dirname, 'index.njk');
const template = fs.readFileSync(templatePath, 'utf-8');
const rendered = nunjucks.renderString(template, {
  title: 'Hola Nunjucks',
  desc: 'Este es un ejemplo de Nunjucks',
  items: ['Item 1', 'Item 2', 'Item 3']
});
console.log(rendered);
```

Ejecuta `node index.js` y verás el HTML generado en la consola:

```html
<h1>Hola Nunjucks<h1>
<p>Este es un ejemplo de Nunjucks<p>
<ul>
    <li>Item 1</li>
    <li>Item 2</li>
    <li>Item 3</li>
 </ul>
```

## Usando una plantilla como base

Vamos a crear una plantilla base que usaremos como punto de partida para otras plantillas de Nunjucks. Crea un archivo `base.njk` con el siguiente contenido:

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{title}}</title>
</head>
<body>
    <h1>Plantilla base de Nunjucks</h1>
    {% block content %}
    {% endblock %}
    <footer>
        <p>Generated by Nunjucks</p>
        <p>Version: {{ version }}</p>
        <p>Author: {{ author }}</p>
    </footer>
</body>
</html>
```

Luego, actualiza tu archivo `index.njk` para que use la plantilla base:

{% raw %}
```html
{% extends "base.njk" %}

{% block content %}
<h1>{{title}}<h1>
<p>{{desc}}<p>
<ul>
  {% for item in items %}
    <li>{{ item }}</li>
  {% endfor %}
</ul>
{% endblock %}
```
{% endraw %}

Por ultimo, actualiza tu archivo `index.js` para añadir las nuevas variables `version` y `author`:

```javascript
const nunjucks = require('nunjucks');
const fs = require('fs');
const path = require('path');

const templatePath = path.join(__dirname, 'index.njk');
const template = fs.readFileSync(templatePath, 'utf-8');
const rendered = nunjucks.renderString(template, {
    title: 'Hola Nunjucks',
    desc: 'Este es un ejemplo de Nunjucks',
    items: ['Item 1', 'Item 2', 'Item 3'],
    version: '2.0.0',
    author: 'datadiego'
});
console.log(rendered);
```

Obtenemos ahora todo lo que hemos definido en `base.njk`, y el contenido de `index.njk` se inserta en el bloque `content` de la plantilla base. El resultado es el siguiente:

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hola Nunjucks</title>
</head>
<body>
    <h1>Plantilla base de Nunjucks</h1>
    
<h1>Hola Nunjucks<h1>
<p>Este es un ejemplo de Nunjucks<p>
<ul>
    <li>Item 1</li>
    <li>Item 2</li>
    <li>Item 3</li>
</ul>
    <footer>
        <p>Generated by Nunjucks</p>
        <p>Version: 2.0.0</p>
        <p>Author: datadiego</p>
    </footer>
</body>
</html>
```

## Sintaxis

Ahora que hemos visto un ejemplo básico, vamos a ver mas en detalle la sintaxis de Nunjucks.

### Variables

{% raw %}
Las variables se definen entre llaves dobles `{{ }}`. Por ejemplo:
{% endraw %}

{% raw %}
```html
<p>{{ title }}</p>
<p>{{ lista[0] }}
<p>{{ objeto.propiedad }}</p>
<p>{{ objeto["propiedad"] }}</p>
```
{% endraw %}

Esto se reemplazará por el valor de la variable `title` que le pasemos al renderizar la plantilla.

> Recuerda que las variables pueden ser cadenas, listas, objetos, etc. Puedes acceder a propiedades de objetos y elementos de listas usando la notación de punto o corchetes.

### Bloques

{% raw %}
Los bloques se definen con `{% block nombre %}` y `{% endblock %}`. Por ejemplo:
{% endraw %}

{% raw %}
```html
{% block content %}
    <p>Contenido del bloque</p>
    {{ variable }}
{% endblock %}
```
{% endraw %}

{% raw %}
Esto nos permite definir secciones de la plantilla que pueden ser sobrescritas por otras plantillas que extiendan esta plantilla base mediante `{% extends "xyz.njk" %}`.
{% endraw %}

### Condicionales

{% raw %}
Los condicionales se definen con `{% if %}` y `{% endif %}`. Por ejemplo:
{% endraw %}

{% raw %}
```html
{% if respuesta %}
    <p>La respuesta es: {{ respuesta }}</p>
{% else %}
    <p>No hay respuesta</p>
{% endif %}
```
{% endraw %}

Esto se reemplazará por el contenido del bloque `if` si la variable `respuesta` es existe o es `true`, de lo contrario se reemplazará por el bloque `else`.

### Bucles
{% raw %}
Los bucles se definen con `{% for elemento in lista %}` y `{% endfor %}`. 
{% endraw %}
Por ejemplo:

{% raw %}
```html
{% for item in items %}
    <li>{{ item }}</li>
{% endfor %}
```
{% endraw %}

Esto se reemplazará por una lista de elementos, donde cada elemento de la lista `items` se renderiza dentro de un `<li>`.

### Filtros

Los filtros se aplican a las variables con el símbolo `|`. Por ejemplo:

{% raw %}
```html
<p>{{ title | upper }}</p>
<p>{{ items | dump(2) }}</p>
<p>{{ items | replace(" ", "_") }}</p>
<p>{{ items | date("Y-m-d H:i:s") }}</p>
<p>{{ items | length }}</p>
<p>{{ items | slice(0, 5) }}</p>
<p>{{ items | first }}</p>
<p>{{ items | last }}</p>
<p>{{ items | join(", ") }}</p>
```
{% endraw %}

Estos filtros nos devolverian:

```html
<p>Filtro upper: HOLA NUNJUCKS</p>
<p>Filtro dump(2)[
  &quot;Item 1&quot;,
  &quot;Item 2&quot;,
  &quot;Item 3&quot;
]</p>
<p>Filtro length: 3</p>
<p>Filtro first: Item 1</p>
<p>filtro last: Item 3</p>
<p>Filtra join: Item 1, Item 2, Item 3</p>
```

En estos ejemplos asumimos que `title` es una cadena de texto y `items` es una lista. Los filtros aplican transformaciones a las variables antes de renderizarlas.

Puedes consultar los [filtros disponibles](https://mozilla.github.io/nunjucks/templating.html#builtin-filters) que ya incluye por defecto Nunjucks, o crear tus propios filtros personalizados.

### Funciones
{% raw %}
Las funciones se definen con `{% set nombre = funcion(parametros) %}`. Por ejemplo:
{% endraw %}

{% raw %}
```html
{% set resultado = suma(2, 3) %}
<p>El resultado de la suma es: {{ resultado }}</p>
```
{% endraw %}

Esto se reemplazará por el resultado de la función `suma` con los parámetros `2` y `3`. Puedes definir tus propias funciones en JavaScript y pasarlas a Nunjucks al renderizar la plantilla. 

### Macros

{% raw %}
Los macros son funciones que se definen dentro de la plantilla y se pueden reutilizar en diferentes partes de la misma. Se definen con `{% macro nombre(parametros) %}` y se llaman con `{{ nombre(parametros) }}`. Por ejemplo:
{% endraw %}

{% raw %}
```html
{% macro saludo(nombre) %}
    <p>Hola {{ nombre }}</p>
{% endmacro %}

{{ saludo("Diego") }}
```
{% endraw %}

### Comentarios

Los comentarios se definen con `{# comentario #}`. Por ejemplo:

{% raw %}
```html
{# Este es un comentario #}
<p>Este es un párrafo</p>
{# <p>Este párrafo no se renderizará</p> #}
{# Este es otro comentario #}
```
{% endraw %}